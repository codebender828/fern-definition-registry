// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model Environments {
  orgId          String
  environmentId  String
  description    String?
  ApiDefinitions ApiDefinitions[]

  @@id([orgId, environmentId])
}

model Apis {
  orgId          String
  apiId          String
  name           String
  description    String?
  logo_s3_url    String?
  git_repo       Bytes?
  ApiDefinitions ApiDefinitions[]

  @@id([orgId, apiId])
}

model ApiDefinitions {
  orgId           String
  apiId           String
  api             Apis?         @relation(fields: [orgId, apiId], references: [orgId, apiId])
  apiDefinitionId String
  environmentId   String?
  environment     Environments? @relation(fields: [orgId, environmentId], references: [orgId, environmentId])
  createdAt       DateTime      @default(now())
  definition      Bytes

  @@id([orgId, apiId, apiDefinitionId])
}
